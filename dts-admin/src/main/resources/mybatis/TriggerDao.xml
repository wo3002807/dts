<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.micheal.dts.component.dao.TriggerDao">
    <update id="add" parameterType="Trigger">
        INSERT INTO
        dts_trigger(sched_name,name,description,next_fire_time,prev_fire_time,priority,state,start_time,end_time,calendar_name)
        VALUE
        (#{schedName,jdbcType=VARCHAR},#{name,jdbcType=VARCHAR},#{description,jdbcType=VARCHAR},
        #{next_fire_time,jdbcType=NUMERIC},#{prev_fire_time,jdbcType=NUMERIC},#{priority,jdbcType=INTEGER},#{state,jdbcType=VARCHAR},
        #{startTime,jdbcType=NUMERIC},#{endTime,jdbcType=NUMERIC},#{calendarName,jdbcType=VARCHAR})
    </update>
    <update id="edit" parameterType="Trigger">
        UPDATE dts_trigger
        SET
        description = #{description,jdbcType=VARCHAR},
        simple_class = #{simpleClass,jdbcType=VARCHAR},
        canonical_class = #{canonicalClass,jdbcType=VARCHAR},
        concurrentable = #{concurrentable,jdbcType=BOOLEAN}
        WHERE
        sched_name = #{schedName,jdbcType=VARCHAR}
        AND name = #{name,jdbcType=VARCHAR}
    </update>
    <select id="queryTrigger" parameterType="Key" resultType="Trigger">
        SELECT * FROM
        dts_task
        WHERE
        sched_name = #{schedName,jdbcType=VARCHAR}
        AND name = #{name,jdbcType=VARCHAR}
    </select>
    <update id="del" parameterType="Key">
        DELETE FROM dts_task
        WHERE
        sched_name = #{schedName,jdbcType=VARCHAR}
        AND name = #{name,jdbcType=VARCHAR}
    </update>
    <select id="queryTriggerByTaskKey" parameterType="Key" resultType="Trigger">
        SELECT * FROM
        dts_task
        WHERE
        sched_name = #{schedName,jdbcType=VARCHAR}
        AND name = #{name,jdbcType=VARCHAR}
    </select>
</mapper>